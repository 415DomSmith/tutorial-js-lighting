<!doctype html>
<html>
<head>
<title>Opacity Shading</title>
<link rel="stylesheet" type="text/css" href="include/style.css"/>
</head>
<body>
<div id="container" style="width:800px; height:800px; overflow:hidden; background: url(images/background.png);">
<img src="images/parallax-01.png"/>
<img src="images/parallax-02.png"/>
<img src="images/parallax-03.png"/>
</div>
<script type="text/javascript" src="include/util.js"></script>
<script type="text/javascript" src="include/shader.js"></script>
<script type="text/javascript">
(function () {
	var shader = new Shader(document.querySelectorAll('#container img'));
	var angle, progress;

	(function loop() {
		angle = Math.sin(Date.now() * 0.002);
		progress = (1 + angle) * 0.5;
		shader.update(progress);
		container.style.backgroundPosition = -50 + progress * 50 + 'px 0';

		requestAnimationFrame(loop);
	}());
}());
</script>
</body>
</html>
